<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Merhaba Yeldanur</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --txt:#f6f7ff;
      --muted:rgba(246,247,255,.74);
      --glass:rgba(10,12,20,.52);
      --stroke:rgba(255,255,255,.14);
    }
    *{box-sizing:border-box}
    html,body{height:100%}

    body{
      margin:0;
      color:var(--txt);
      overflow:hidden;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background:
        radial-gradient(1200px 700px at 20% 10%, #141a3a 0%, transparent 55%),
        radial-gradient(1000px 700px at 80% 80%, #0b2a2a 0%, transparent 55%),
        linear-gradient(180deg, #02030a 0%, #060716 55%, #02020a 100%);
    }

    /* Canvaslar tƒ±k yemesin */
    canvas#sky, canvas#meteors, canvas#fx{
      position:fixed; inset:0;
      width:100%; height:100%;
      display:block;
      pointer-events:none;
    }

    .vignette{
      position:fixed; inset:-40px;
      background:
        radial-gradient(circle at center, transparent 40%, rgba(0,0,0,.78) 100%),
        radial-gradient(800px 500px at 70% 20%, rgba(255,255,255,.05), transparent 65%);
      pointer-events:none;
    }

    /* Ay */
    .moon{
      position:fixed;
      right: 7vw;
      top: 8vh;
      width: 86px;
      height: 86px;
      border-radius: 50%;
      background:
        radial-gradient(circle at 35% 30%, rgba(255,255,255,.95) 0%, rgba(245,247,255,.92) 35%, rgba(210,220,255,.85) 60%, rgba(160,175,220,.55) 100%);
      box-shadow:
        0 0 30px rgba(220,230,255,.35),
        0 0 70px rgba(180,205,255,.18);
      opacity:.95;
      overflow:hidden;
      pointer-events:none;
    }
    .moon::before{
      content:"";
      position:absolute; inset:-10px;
      background:
        radial-gradient(circle at 35% 40%, rgba(120,140,190,.18) 0 9px, transparent 10px),
        radial-gradient(circle at 65% 55%, rgba(120,140,190,.14) 0 13px, transparent 14px),
        radial-gradient(circle at 55% 30%, rgba(120,140,190,.10) 0 7px, transparent 8px),
        radial-gradient(circle at 30% 70%, rgba(120,140,190,.12) 0 11px, transparent 12px);
      mix-blend-mode:multiply;
      opacity:.55;
      transform: rotate(10deg);
    }
    .moon::after{
      content:"";
      position:absolute; inset:0;
      background: radial-gradient(circle at 25% 35%, transparent 0 55%, rgba(0,0,0,.18) 75%, rgba(0,0,0,.35) 100%);
      opacity:.55;
    }

    .wrap{
      position:relative;
      height:100%;
      display:grid;
      place-items:center;
      padding:22px;
      z-index:2;
    }
    .card{
      width:min(720px, 94vw);
      border:1px solid var(--stroke);
      background: var(--glass);
      backdrop-filter: blur(16px);
      border-radius:26px;
      padding:26px 18px 18px;
      box-shadow: 0 24px 80px rgba(0,0,0,.6);
      text-align:center;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }

    .title{
      font-family: "Playfair Display", serif;
      font-size: 28px;
      margin: 6px 0 10px;
      text-shadow: 0 10px 40px rgba(0,0,0,.6);
      min-height:38px;
    }

    .line{
      font-size: 17px;
      line-height: 1.65;
      margin: 10px 0 14px;
      min-height: 100px;
      white-space: pre-line;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 0 6px;
      opacity:1;
      transition: opacity .16s ease;
    }

    .hint{
      font-size: 13px;
      color: var(--muted);
      margin-top: 6px;
    }

    .row{
      display:flex;
      gap:12px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top:16px;
    }

    .btn{
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.08);
      color: var(--txt);
      padding: 12px 18px;
      border-radius: 16px;
      cursor:pointer;
      font-size: 14px;
      transition: transform .18s ease, background .18s ease, opacity .18s ease;
    }
    .btn.primary{ background: rgba(255,255,255,.12); }
    .btn:active{ transform: scale(.99); }
    #choiceRow{ display:none; }
  </style>
</head>

<body>
  <canvas id="sky"></canvas>
  <canvas id="meteors"></canvas>
  <canvas id="fx"></canvas>

  <div class="moon" aria-hidden="true"></div>
  <div class="vignette"></div>

  <main class="wrap">
    <section class="card" id="card">
      <div class="title" id="title">Merhaba Yeldanur</div>
      <div class="line" id="line"></div>
      <div class="hint" id="hint">Devam etmek i√ßin tƒ±kla ‚ú®</div>

      <div class="row" id="choiceRow">
        <button class="btn primary" id="yesBtn" type="button">Evet</button>
        <button class="btn" id="noBtn" type="button">Hayƒ±r</button>
      </div>
    </section>
  </main>

  <!-- Repoya music.mp3 y√ºkle -->
  <audio id="audio" loop>
    <source src="music.mp3" type="audio/mpeg" />
  </audio>

  <script>
    /* -------- Helpers -------- */
    function rand(min,max){ return Math.random()*(max-min)+min; }

    /* -------- UI refs -------- */
    const card = document.getElementById("card");
    const lineEl  = document.getElementById("line");
    const titleEl = document.getElementById("title");
    const hintEl  = document.getElementById("hint");
    const choiceRow = document.getElementById("choiceRow");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn  = document.getElementById("noBtn");
    const audio = document.getElementById("audio");

    /* -------- Scenes (her tƒ±kta deƒüi≈üir) -------- */
    const scenes = [
      { title:"Merhaba Yeldanur", line:"", hint:"Devam etmek i√ßin tƒ±kla ‚ú®", choice:false },
      { title:"", line:"Bu aralar keyifsiz olduƒüunu biliyorum‚Ä¶\nVe yanƒ±nda olmak istiyorum.", hint:"Devam etmek i√ßin tƒ±kla", choice:false },
      { title:"", line:"Bug√ºn ak≈üam i≈ülerin bittiƒüinde‚Ä¶\n5 dakika bile olsa seni g√∂rmek ve yanƒ±nda olmak istiyorum.", hint:"Se√ßimini yap üòä", choice:true },
    ];
    let sceneIndex = 0;

    function setScene(i){
      const s = scenes[i];
      titleEl.textContent = (s.title && s.title.trim()) ? s.title : " ";
      lineEl.style.opacity = "0";
      setTimeout(() => {
        lineEl.textContent = (s.line && s.line.trim()) ? s.line : " ";
        hintEl.textContent = s.hint || " ";
        choiceRow.style.display = s.choice ? "flex" : "none";
        lineEl.style.opacity = "1";
      }, 120);
    }
    setScene(sceneIndex);

    /* -------- Music: ilk dokunu≈üta ba≈ülasƒ±n -------- */
    let musicStarted = false;
    async function startMusicOnce(){
      if(musicStarted) return;
      try { await audio.play(); musicStarted = true; } catch(e){ /* bazƒ± cihazlarda 2. dokunu≈üta */ }
    }

    function advance(){
      if(sceneIndex < scenes.length - 1){
        sceneIndex++;
        setScene(sceneIndex);
      }
    }

    /* iOS i√ßin en saƒülam: karta baƒüla (click + touchstart + pointerdown) */
    async function handleTap(e){
      // butonlara basƒ±nca sahne ilerlemesin
      if(e.target && e.target.tagName && e.target.tagName.toLowerCase() === "button") return;

      await startMusicOnce();
      advance();
    }

    card.addEventListener("pointerdown", handleTap, {passive:true});
    card.addEventListener("touchstart", handleTap, {passive:true});
    card.addEventListener("click", handleTap);

    /* -------- Yes/No b√ºy√º-k√º√ß√ºl -------- */
    let yesScale = 1, noScale = 1;
    function applyScales(){
      yesBtn.style.transform = `scale(${yesScale})`;
      noBtn.style.transform  = `scale(${noScale})`;
      if(noScale <= 0.25){
        noBtn.style.opacity = "0";
        noBtn.style.pointerEvents = "none";
      }else{
        noBtn.style.opacity = "1";
        noBtn.style.pointerEvents = "auto";
      }
    }
    applyScales();

    noBtn.addEventListener("click", async (e) => {
      e.stopPropagation();
      await startMusicOnce();
      noScale  = Math.max(0.2, noScale * 0.78);
      yesScale = Math.min(2.0, yesScale * 1.12);
      applyScales();
    });

    /* -------- Background: stars + meteor (canvas) -------- */
    const sky = document.getElementById("sky");
    const sctx = sky.getContext("2d");
    const mete = document.getElementById("meteors");
    const mctx = mete.getContext("2d");
    const fx = document.getElementById("fx");
    const fctx = fx.getContext("2d");

    let W,H,DPR, stars=[];
    let meteor = null;

    function resize(){
      DPR = Math.min(window.devicePixelRatio || 1, 2);
      W = Math.floor(innerWidth * DPR);
      H = Math.floor(innerHeight * DPR);

      for(const c of [sky, mete, fx]){
        c.width = W; c.height = H;
        c.style.width = innerWidth + "px";
        c.style.height = innerHeight + "px";
      }

      const count = Math.floor((innerWidth * innerHeight) / 6500);
      stars = Array.from({length: count}, () => ({
        x: Math.random()*W,
        y: Math.random()*H,
        r: rand(0.6, 1.8)*DPR,
        base: rand(0.15, 0.85),
        tw: rand(0.002, 0.009),
        ph: rand(0, Math.PI*2),
      }));
    }

    function drawSky(){
      sctx.clearRect(0,0,W,H);

      const g1 = sctx.createRadialGradient(W*0.22, H*0.18, 0, W*0.22, H*0.18, W*0.65);
      g1.addColorStop(0, "rgba(120,140,255,0.10)");
      g1.addColorStop(1, "rgba(0,0,0,0)");
      sctx.fillStyle = g1; sctx.fillRect(0,0,W,H);

      const g2 = sctx.createRadialGradient(W*0.78, H*0.72, 0, W*0.78, H*0.72, W*0.60);
      g2.addColorStop(0, "rgba(90,255,220,0.07)");
      g2.addColorStop(1, "rgba(0,0,0,0)");
      sctx.fillStyle = g2; sctx.fillRect(0,0,W,H);

      const t = performance.now();
      for(const st of stars){
        const tw = (Math.sin(t*st.tw + st.ph) + 1) / 2;
        const a  = Math.min(1, st.base * (0.65 + tw*0.55));
        sctx.beginPath();
        sctx.fillStyle = `rgba(255,255,255,${a})`;
        sctx.shadowBlur = 12*DPR;
        sctx.shadowColor = `rgba(255,255,255,${a})`;
        sctx.arc(st.x, st.y, st.r*(0.85 + tw*0.35), 0, Math.PI*2);
        sctx.fill();
      }

      requestAnimationFrame(drawSky);
    }

    function spawnMeteor(){
      const startX = rand(0.02, 0.25) * W;
      const startY = rand(0.06, 0.22) * H;

      // saƒüa-a≈üaƒüƒ± y√∂n (mobilde doƒüal)
      const angle = rand(0.30, 0.45); // rad
      const speed = rand(2.2, 3.1) * DPR;
      const life  = rand(140, 220);

      meteor = {
        x: startX, y: startY,
        vx: Math.cos(angle) * speed,
        vy: Math.sin(angle) * speed,
        life, max: life,
        len: rand(220, 360)*DPR,
      };
    }

    function scheduleMeteor(){
      setTimeout(() => { spawnMeteor(); scheduleMeteor(); }, rand(9000, 18000));
    }

    function drawMeteors(){
      mctx.clearRect(0,0,W,H);

      if(meteor){
        meteor.life--;
        meteor.x += meteor.vx * 6;  // daha uzun iz i√ßin
        meteor.y += meteor.vy * 6;

        const a = Math.max(0, meteor.life / meteor.max);

        const dx = meteor.vx, dy = meteor.vy;
        const mag = Math.hypot(dx,dy) || 1;
        const ux = dx/mag, uy = dy/mag;

        const x2 = meteor.x - ux * meteor.len;
        const y2 = meteor.y - uy * meteor.len;

        const grad = mctx.createLinearGradient(meteor.x, meteor.y, x2, y2);
        grad.addColorStop(0, `rgba(255,255,255,${0.95*a})`);
        grad.addColorStop(0.35, `rgba(210,225,255,${0.35*a})`);
        grad.addColorStop(1, `rgba(255,255,255,0)`);

        mctx.strokeStyle = grad;
        mctx.lineWidth = 2.2*DPR;
        mctx.lineCap = "round";
        mctx.shadowBlur = 18*DPR;
        mctx.shadowColor = `rgba(255,255,255,${0.45*a})`;

        mctx.beginPath();
        mctx.moveTo(meteor.x, meteor.y);
        mctx.lineTo(x2, y2);
        mctx.stroke();

        mctx.shadowBlur = 24*DPR;
        mctx.fillStyle = `rgba(255,255,255,${0.9*a})`;
        mctx.beginPath();
        mctx.arc(meteor.x, meteor.y, 3.2*DPR, 0, Math.PI*2);
        mctx.fill();

        if(meteor.life <= 0) meteor = null;
      }

      requestAnimationFrame(drawMeteors);
    }

    /* -------- Fireworks (EVET‚Äôte) -------- */
    const particles = [];
    let fireworksOn = false;

    function burst(x, y){
      const n = Math.floor(rand(60, 90));
      const baseHue = rand(190, 330);
      for(let i=0;i<n;i++){
        const ang = rand(0, Math.PI*2);
        const spd = rand(1.2, 4.8) * DPR;
        particles.push({
          x, y,
          vx: Math.cos(ang)*spd,
          vy: Math.sin(ang)*spd,
          life: rand(40, 70),
          max: 70,
          r: rand(1.2, 2.6)*DPR,
          hue: baseHue + rand(-25, 25)
        });
      }
    }

    function drawFireworks(){
      fctx.fillStyle = "rgba(0,0,0,0.18)";
      fctx.fillRect(0,0,W,H);

      for(let i=particles.length-1;i>=0;i--){
        const p = particles[i];
        p.life--;
        p.vx *= 0.985;
        p.vy *= 0.985;
        p.vy += 0.02 * DPR;

        p.x += p.vx;
        p.y += p.vy;

        const a = Math.max(0, p.life / p.max);

        fctx.beginPath();
        fctx.fillStyle = `hsla(${p.hue}, 90%, 70%, ${a})`;
        fctx.shadowBlur = 18 * DPR;
        fctx.shadowColor = `hsla(${p.hue}, 90%, 70%, ${a})`;
        fctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
        fctx.fill();

        if(p.life <= 0) particles.splice(i,1);
      }

      if(fireworksOn || particles.length){
        requestAnimationFrame(drawFireworks);
      }else{
        fctx.clearRect(0,0,W,H);
      }
    }

    function startFireworks(){
      if(fireworksOn) return;
      fireworksOn = true;

      burst(W*0.55, H*0.35);

      const endAt = Date.now() + 5200;
      (function loop(){
        if(Date.now() > endAt){ fireworksOn = false; return; }
        burst(rand(0.25,0.75)*W, rand(0.18,0.52)*H);
        setTimeout(loop, rand(500, 950));
      })();

      drawFireworks();
    }

    yesBtn.addEventListener("click", async (e) => {
      e.stopPropagation();
      await startMusicOnce();

      startFireworks();

      titleEl.textContent = "ü§ç";
      lineEl.textContent  = "Tamam.\nƒ∞≈üin bittiƒüinde haber ver‚Ä¶\nBen geliyorum.";
      hintEl.textContent  = " ";
      choiceRow.style.display = "none";
    });

    window.addEventListener("resize", resize);
    resize();
    drawSky();
    scheduleMeteor();
    drawMeteors();
  </script>
</body>
</html>
